{% extends 'budget/base.html' %}
{% load humanize %}

{% block content %}
<div class="row">
  <div class="col">
    <div class="d-flex justify-content-between align-items-center">
      <h1>Categories</h1>
      <a class="btn btn-outline-secondary" href="{% url 'budget:categories' %}">
        <span class="d-flex align-items-center material-symbols-outlined">
          tune
        </span>
      </a>
    </div>
    {% if lists %}
      {% if lists.categories %}
        <ul class="list-group">
          {% for category in lists.categories %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              {{ category.name|truncatechars:25 }}
              <span class="badge bg-primary">{{ category.num }}</span>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>Click on the <span class="material-symbols-outlined">
          tune
        </span> button to add category.</p>
      {% endif %}
    {% endif %}
  </div>
  <div class="col">
    <div class="d-flex justify-content-between align-items-center">
      <h1>Items</h1>
      <a class="btn btn-outline-secondary" href="{% url 'budget:items' %}">
        <span class="d-flex align-items-center material-symbols-outlined">
          tune
        </span>
      </a>
    </div>
    {% if lists %}
      {% if lists.items %}
        <ul class="list-group">
          {% for item in lists.items %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div class="row">
                <div class="col-12">{{ item.title|truncatechars:23 }}</div>
                <small class="col-12 text-secondary">{{ item.category.name|truncatechars:25 }}</small>
              </div>
              <span class="badge bg-success">{{ item.cost|intcomma }} â‚½</span>
            </li>
          {% endfor %}
        </ul>
      {% else %}
      <p>Click on the <span class="material-symbols-outlined">
        tune
      </span> button to add item.</p>
      {% endif %}
    {% endif %}
  </div>
  <div class="col">
    <h1>Chart</h1>
    {% if lists %}
      {% if lists.labels and lists.data %}
        {% block chart %}
          {% include './_blocks/chart.html' %}
        {% endblock %}
        <canvas class="chart"></canvas>
      {% else %}
        <p>Add some categories and items.</p>
      {% endif %}
    {% endif %}
  </div>
</div>
{% endblock %}
